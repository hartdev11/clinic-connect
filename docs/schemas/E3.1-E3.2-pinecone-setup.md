# E3.1–E3.2 — Pinecone Setup

## สร้าง Index

```bash
npx tsx scripts/setup-pinecone-index.ts
```

หรือ dry-run:
```bash
npx tsx scripts/setup-pinecone-index.ts --dry-run
```

---

## Config (env)

| Variable | Default | หมายเหตุ |
|----------|---------|----------|
| PINECONE_API_KEY | — | Required (จาก https://app.pinecone.io) |
| PINECONE_INDEX_NAME | clinic-knowledge | ชื่อ index |
| PINECONE_CLOUD | aws | cloud (aws, gcp, azure) |
| PINECONE_REGION | us-east-1 | region (Starter plan: us-east-1 เท่านั้น) |

---

## Index Spec

- **dimension**: 1536 (OpenAI text-embedding-3-small / ada-002)
- **metric**: cosine
- **type**: serverless

---

## Namespace สำหรับ Knowledge (E3.2)

| Namespace | ใช้สำหรับ |
|-----------|-----------|
| `knowledge` | Knowledge base — ราคา, โปร, FAQ, บริการ |

ใช้ตอน upsert/query:
```typescript
const index = getKnowledgeIndex();
await index.namespace("knowledge").upsert([...]);
const results = await index.namespace("knowledge").query({ vector, topK: 5 });
```

---

## ไฟล์ที่เกี่ยวข้อง

| ไฟล์ | การใช้ |
|------|--------|
| `src/lib/pinecone.ts` | getPineconeClient(), getKnowledgeIndex(), PINECONE_NAMESPACE_KNOWLEDGE |
| `scripts/setup-pinecone-index.ts` | สร้าง index |
