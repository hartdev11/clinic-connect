# E1.5 — Type Definitions (Multi-tenant)

## ไฟล์ที่แก้

- `src/types/clinic.ts` — comment, ระบุ legacy
- `src/types/organization.ts` — ครบแล้วจาก E1.1

## ตัวอย่าง interface ก่อน/หลัง

### Booking
```ts
// ก่อน (E1.4 之前)
interface Booking {
  id: string;
  clinicId: string;      // ← legacy
  branchId?: string;
  customerName: string;
  // ...
}

// หลัง (E1.5)
interface Booking {
  id: string;
  org_id: string;        // ← required
  branch_id?: string;    // ← branch-scoped
  customerName: string;
  branchId?: string;     // legacy display
  branchName?: string;
  // ...
}
```

### Customer
```ts
// ก่อน
interface Customer {
  clinicId: string;
  // ...
}

// หลัง
interface Customer {
  org_id: string;
  branch_id?: string;
  // ...
}
```

### ClinicProfile (Legacy)
```ts
// ยังใช้สำหรับ API response backward compat
// ไม่มี org_id — map จาก OrgProfile เมื่อ return
interface ClinicProfile {
  id: string;
  clinicName: string;
  branches: number;
  phone: string;
  email: string;
  createdAt: string;
}
```

### OrgProfile (ใหม่)
```ts
interface OrgProfile {
  id: string;
  org_id: string;
  clinicName: string;
  plan: string;
  branches: number;
  phone: string;
  email: string;
  createdAt: string;
}
```

## สรุป Entity vs org_id / branch_id

| Entity | org_id | branch_id? | หมายเหตุ |
|--------|--------|------------|----------|
| Booking | ✅ | ✅ | branch-scoped |
| Customer | ✅ | ✅ | branch-scoped |
| Transaction | ✅ | ✅ | branch-scoped |
| Promotion | ✅ | ✅ | branch-scoped |
| Organization | - | - | root tenant |
| Branch | ✅ | - | ผูก org |
| ClinicProfile | - | - | legacy API shape |
| OrgProfile | ✅ | - | อ่านจาก org + branches |
