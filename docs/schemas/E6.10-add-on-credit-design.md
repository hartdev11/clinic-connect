# E6.10 — Add-on Credit (Design only)

## สถานะ

- เตรียม schema เท่านั้น
- ไม่ implement logic เต็ม

---

## Schema

### add_on_credits collection (concept)

| Field | Type | หมายเหตุ |
|-------|------|----------|
| org_id | string | FK → organizations |
| type | string | branch \| user \| storage |
| quantity | number | จำนวน credit ที่ซื้อ |
| used | number | จำนวนที่ใช้แล้ว (default 0) |
| expires_at | string (ISO) | หมดอายุ (optional) |
| createdAt, updatedAt | timestamp | |

### TypeScript (src/types/subscription.ts)

```ts
AddOnType = "branch" | "user" | "storage"
AddOnCredit { id, org_id, type, quantity, used?, expires_at?, createdAt, updatedAt }
```

---

## Logic (ไม่ implement Phase 1)

- ซื้อ add-on → เพิ่ม record ใน add_on_credits
- enforceLimits ใช้: max_branches = plan_limit + sum(add_on branch credits ที่ยังใช้ไม่หมด)
- ใช้ credit เมื่อ add branch / add user ฯลฯ
